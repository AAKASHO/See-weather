import React, { useState } from "react";
import { Link, useLocation } from "react-router-dom";
import { Logo, LogoSm } from "../../../assets/images";

const SideBar = () => {
  const sidebarMenu = [
    {
      name: "Dashboard",
      icon: <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M1 16.7964C1 15.2559 1 14.4857 1.34673 13.9199C1.54074 13.6033 1.80693 13.3371 2.12353 13.1431C2.68934 12.7964 3.45956 12.7964 5 12.7964C6.54044 12.7964 7.31066 12.7964 7.87647 13.1431C8.19307 13.3371 8.45926 13.6033 8.65327 13.9199C9 14.4857 9 15.2559 9 16.7964C9 18.3368 9 19.107 8.65327 19.6729C8.45926 19.9895 8.19307 20.2556 7.87647 20.4497C7.31066 20.7964 6.54044 20.7964 5 20.7964C3.45956 20.7964 2.68934 20.7964 2.12353 20.4497C1.80693 20.2556 1.54074 19.9895 1.34673 19.6729C1 19.107 1 18.3368 1 16.7964Z" stroke="white" stroke-width="1.5"/>
      <path d="M13 16.7964C13 15.2559 13 14.4857 13.3467 13.9199C13.5407 13.6033 13.8069 13.3371 14.1235 13.1431C14.6893 12.7964 15.4596 12.7964 17 12.7964C18.5404 12.7964 19.3107 12.7964 19.8765 13.1431C20.1931 13.3371 20.4593 13.6033 20.6533 13.9199C21 14.4857 21 15.2559 21 16.7964C21 18.3368 21 19.107 20.6533 19.6729C20.4593 19.9895 20.1931 20.2556 19.8765 20.4497C19.3107 20.7964 18.5404 20.7964 17 20.7964C15.4596 20.7964 14.6893 20.7964 14.1235 20.4497C13.8069 20.2556 13.5407 19.9895 13.3467 19.6729C13 19.107 13 18.3368 13 16.7964Z" stroke="white" stroke-width="1.5"/>
      <path d="M1 4.79639C1 3.25595 1 2.48573 1.34673 1.91992C1.54074 1.60332 1.80693 1.33713 2.12353 1.14312C2.68934 0.796387 3.45956 0.796387 5 0.796387C6.54044 0.796387 7.31066 0.796387 7.87647 1.14312C8.19307 1.33713 8.45926 1.60332 8.65327 1.91992C9 2.48573 9 3.25595 9 4.79639C9 6.33682 9 7.10704 8.65327 7.67285C8.45926 7.98945 8.19307 8.25564 7.87647 8.44966C7.31066 8.79639 6.54044 8.79639 5 8.79639C3.45956 8.79639 2.68934 8.79639 2.12353 8.44966C1.80693 8.25564 1.54074 7.98945 1.34673 7.67285C1 7.10704 1 6.33682 1 4.79639Z" stroke="white" stroke-width="1.5"/>
      <path d="M13 4.79639C13 3.25595 13 2.48573 13.3467 1.91992C13.5407 1.60332 13.8069 1.33713 14.1235 1.14312C14.6893 0.796387 15.4596 0.796387 17 0.796387C18.5404 0.796387 19.3107 0.796387 19.8765 1.14312C20.1931 1.33713 20.4593 1.60332 20.6533 1.91992C21 2.48573 21 3.25595 21 4.79639C21 6.33682 21 7.10704 20.6533 7.67285C20.4593 7.98945 20.1931 8.25564 19.8765 8.44966C19.3107 8.79639 18.5404 8.79639 17 8.79639C15.4596 8.79639 14.6893 8.79639 14.1235 8.44966C13.8069 8.25564 13.5407 7.98945 13.3467 7.67285C13 7.10704 13 6.33682 13 4.79639Z" stroke="white" stroke-width="1.5"/>
      </svg>,
      link: "/",
    },
    {
      name: "Work Order",
      icon: <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M10.0065 19.7964H8.60546C5.02021 19.7964 3.22759 19.7964 2.11379 18.6614C0.999999 17.5265 0.999999 15.6998 0.999999 12.0464C0.999999 8.393 0.999999 6.56631 2.11379 5.43135C3.22759 4.29639 5.02021 4.29639 8.60546 4.29639H12.4082C15.9934 4.29639 17.7861 4.29639 18.8999 5.43135C19.7568 6.30458 19.9544 7.58728 20 9.79639" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M17.85 17.6464L16.5 16.7464V14.4964M12 16.2964C12 18.7817 14.0147 20.7964 16.5 20.7964C18.9853 20.7964 21 18.7817 21 16.2964C21 13.8111 18.9853 11.7964 16.5 11.7964C14.0147 11.7964 12 13.8111 12 16.2964Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M15 4.29639L14.9007 3.98732C14.4056 2.44728 14.1581 1.67726 13.5689 1.23682C12.9796 0.796387 12.197 0.796387 10.6316 0.796387H10.3684C8.80304 0.796387 8.02036 0.796387 7.43111 1.23682C6.84186 1.67726 6.59436 2.44728 6.09934 3.98732L6 4.29639" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>,
      link: "/work-order",
    },
    {
      name: "Artificial Intelligence",
      icon: <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M20.25 4.29639C19.8358 4.29639 19.5 3.9606 19.5 3.54639C19.5 3.13217 19.8358 2.79639 20.25 2.79639C20.6642 2.79639 21 3.13217 21 3.54639C21 3.9606 20.6642 4.29639 20.25 4.29639ZM20.25 4.29639V8.04639C20.25 8.74417 20.25 9.09306 20.1639 9.37696C19.97 10.0162 19.4698 10.5164 18.8306 10.7103C18.5467 10.7964 18.1978 10.7964 17.5 10.7964" stroke="white" stroke-width="1.5" stroke-linejoin="round"/>
      <path d="M1.75 17.2964C2.16421 17.2964 2.5 17.6322 2.5 18.0464C2.5 18.4606 2.16421 18.7964 1.75 18.7964C1.33579 18.7964 1 18.4606 1 18.0464C1 17.6322 1.33579 17.2964 1.75 17.2964ZM1.75 17.2964L1.75 13.5464C1.75 12.8486 1.75 12.4997 1.83612 12.2158C2.03002 11.5766 2.53023 11.0764 3.16943 10.8825C3.45333 10.7964 3.80222 10.7964 4.5 10.7964" stroke="white" stroke-width="1.5" stroke-linejoin="round"/>
      <path d="M4.5 1.54639C4.5 1.9606 4.16421 2.29639 3.75 2.29639C3.33579 2.29639 3 1.9606 3 1.54639C3 1.13217 3.33579 0.796387 3.75 0.796387C4.16421 0.796387 4.5 1.13217 4.5 1.54639ZM4.5 1.54639L8.25 1.54639C8.94778 1.54639 9.29667 1.54639 9.58057 1.63251C10.2198 1.82641 10.72 2.32661 10.9139 2.96582C11 3.24971 11 3.59861 11 4.29639" stroke="white" stroke-width="1.5" stroke-linejoin="round"/>
      <path d="M17.5 20.0464C17.5 19.6322 17.8358 19.2964 18.25 19.2964C18.6642 19.2964 19 19.6322 19 20.0464C19 20.4606 18.6642 20.7964 18.25 20.7964C17.8358 20.7964 17.5 20.4606 17.5 20.0464ZM17.5 20.0464L13.75 20.0464C13.0522 20.0464 12.7033 20.0464 12.4194 19.9603C11.7802 19.7664 11.28 19.2662 11.0861 18.627C11 18.3431 11 17.9942 11 17.2964" stroke="white" stroke-width="1.5" stroke-linejoin="round"/>
      <path d="M4.5481 10.7485C4.5481 7.68441 4.5481 6.15234 5.5 5.20044C6.4519 4.24854 7.98397 4.24854 11.0481 4.24854C14.1122 4.24854 15.6443 4.24854 16.5962 5.20044C17.5481 6.15234 17.5481 7.68441 17.5481 10.7485C17.5481 13.8127 17.5481 15.3447 16.5962 16.2966C15.6443 17.2485 14.1122 17.2485 11.0481 17.2485C7.98397 17.2485 6.4519 17.2485 5.5 16.2966C4.5481 15.3447 4.5481 13.8127 4.5481 10.7485Z" stroke="white" stroke-width="1.5" stroke-linejoin="round"/>
      <path d="M11.5 13.2964L10.0393 8.7753C9.94751 8.49105 9.66575 8.29639 9.34615 8.29639C9.02656 8.29639 8.7448 8.49105 8.65297 8.7753L7.19231 13.2964M13.9999 8.29639V13.2964M7.73077 11.7964H10.9615" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>,
      link: "/artificial-intelligence",
    },
    {
      name: "Analytics",
      icon: <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M6 15.7964L6 11.7964" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M11 15.7964L11 5.79639" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M16 15.7964L16 9.79639" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M1.5 10.7964C1.5 6.31804 1.5 4.07887 2.89124 2.68763C4.28249 1.29639 6.52166 1.29639 11 1.29639C15.4783 1.29639 17.7175 1.29639 19.1088 2.68763C20.5 4.07887 20.5 6.31804 20.5 10.7964C20.5 15.2747 20.5 17.5139 19.1088 18.9051C17.7175 20.2964 15.4783 20.2964 11 20.2964C6.52166 20.2964 4.28249 20.2964 2.89124 18.9051C1.5 17.5139 1.5 15.2747 1.5 10.7964Z" stroke="white" stroke-width="1.5" stroke-linejoin="round"/>
      </svg>,
      link: "/analytics",
    },
    {
      name: "User",
      icon: <svg width="24" height="18" viewBox="0 0 24 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M20.774 14.7964C21.5233 14.7964 22.1193 14.3249 22.6545 13.6655C23.7499 12.3158 21.9513 11.2372 21.2654 10.709C20.568 10.172 19.7894 9.8678 19 9.79639M18 7.79639C19.3807 7.79639 20.5 6.6771 20.5 5.29639C20.5 3.91567 19.3807 2.79639 18 2.79639" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M3.22596 14.7964C2.47666 14.7964 1.88067 14.3249 1.34555 13.6655C0.250089 12.3158 2.04867 11.2372 2.73465 10.709C3.43197 10.172 4.21058 9.8678 5 9.79639M5.5 7.79639C4.11929 7.79639 3 6.6771 3 5.29639C3 3.91567 4.11929 2.79639 5.5 2.79639" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M8.0838 11.9076C7.06203 12.5394 4.38299 13.8295 6.0147 15.4438C6.81178 16.2324 7.69952 16.7964 8.81563 16.7964H15.1844C16.3005 16.7964 17.1882 16.2324 17.9853 15.4438C19.617 13.8295 16.938 12.5394 15.9162 11.9076C13.5201 10.426 10.4799 10.426 8.0838 11.9076Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M15.5 4.29639C15.5 6.22938 13.933 7.79639 12 7.79639C10.067 7.79639 8.5 6.22938 8.5 4.29639C8.5 2.36339 10.067 0.796387 12 0.796387C13.933 0.796387 15.5 2.36339 15.5 4.29639Z" stroke="white" stroke-width="1.5"/>
      </svg>,
      link: "/user",
    },
    
    
   
    {
      name: "Setting",
      icon: <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M20.3175 6.14139L19.8239 5.28479C19.4506 4.63696 19.264 4.31305 18.9464 4.18388C18.6288 4.05472 18.2696 4.15664 17.5513 4.36048L16.3311 4.70418C15.8725 4.80994 15.3913 4.74994 14.9726 4.53479L14.6357 4.34042C14.2766 4.11043 14.0004 3.77133 13.8475 3.37274L13.5136 2.37536C13.294 1.71534 13.1842 1.38533 12.9228 1.19657C12.6615 1.00781 12.3143 1.00781 11.6199 1.00781H10.5051C9.81078 1.00781 9.4636 1.00781 9.20223 1.19657C8.94085 1.38533 8.83106 1.71534 8.61149 2.37536L8.27753 3.37274C8.12465 3.77133 7.84845 4.11043 7.48937 4.34042L7.15249 4.53479C6.73374 4.74994 6.25259 4.80994 5.79398 4.70418L4.57375 4.36048C3.85541 4.15664 3.49625 4.05472 3.17867 4.18388C2.86109 4.31305 2.67445 4.63696 2.30115 5.28479L1.80757 6.14139C1.45766 6.74864 1.2827 7.05227 1.31666 7.37549C1.35061 7.69871 1.58483 7.95918 2.05326 8.48012L3.0843 9.63282C3.3363 9.95185 3.51521 10.5078 3.51521 11.0077C3.51521 11.5078 3.33636 12.0636 3.08433 12.3827L2.05326 13.5354C1.58483 14.0564 1.35062 14.3168 1.31666 14.6401C1.2827 14.9633 1.45766 15.2669 1.80757 15.8741L2.30114 16.7307C2.67443 17.3785 2.86109 17.7025 3.17867 17.8316C3.49625 17.9608 3.85542 17.8589 4.57377 17.655L5.79394 17.3113C6.25263 17.2055 6.73387 17.2656 7.15267 17.4808L7.4895 17.6752C7.84851 17.9052 8.12464 18.2442 8.2775 18.6428L8.61149 19.6403C8.83106 20.3003 8.94085 20.6303 9.20223 20.8191C9.4636 21.0078 9.81078 21.0078 10.5051 21.0078H11.6199C12.3143 21.0078 12.6615 21.0078 12.9228 20.8191C13.1842 20.6303 13.294 20.3003 13.5136 19.6403L13.8476 18.6428C14.0004 18.2442 14.2765 17.9052 14.6356 17.6752L14.9724 17.4808C15.3912 17.2656 15.8724 17.2055 16.3311 17.3113L17.5513 17.655C18.2696 17.8589 18.6288 17.9608 18.9464 17.8316C19.264 17.7025 19.4506 17.3785 19.8239 16.7307L20.3175 15.8741C20.6674 15.2669 20.8423 14.9633 20.8084 14.6401C20.7744 14.3168 20.5402 14.0564 20.0718 13.5354L19.0407 12.3827C18.7887 12.0636 18.6098 11.5078 18.6098 11.0077C18.6098 10.5078 18.7888 9.95185 19.0407 9.63282L20.0718 8.48012C20.5402 7.95918 20.7744 7.69871 20.8084 7.37549C20.8423 7.05227 20.6674 6.74864 20.3175 6.14139Z" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
      <path d="M14.5195 11C14.5195 12.933 12.9525 14.5 11.0195 14.5C9.08653 14.5 7.51953 12.933 7.51953 11C7.51953 9.067 9.08653 7.5 11.0195 7.5C12.9525 7.5 14.5195 9.067 14.5195 11Z" stroke="white" stroke-width="1.5"/>
      </svg>,
      link: "",
      submenus: [
        {
          name: "Org Master",
          link: "/settings/banner",
        },
        {
          name: "Workers",
          link: "/settings/my-profile",
        },
        {
          name: "Equipment",
          link: "/settings/my-profile",
        },
        {
          name: "Process",
          link: "/settings/my-profile",
        },
      ],
    },
    {
      name: "Logout",
      icon: <svg width="20" height="22" viewBox="0 0 20 22" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M4 5.5C2.15875 7.14796 1 9.33445 1 11.9999C1 16.9705 5.02944 20.9999 10 20.9999C14.9706 20.9999 19 16.9705 19 11.9999C19 9.33445 17.8412 7.14796 16 5.5" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M10 1V10M10 1C9.29977 1 7.99153 2.9943 7.5 3.5M10 1C10.7002 1 12.0085 2.9943 12.5 3.5" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>,
      link: "/login",
    },
  ];

  const location = useLocation();
  const activePath = location.pathname;
  const activeSubMenus = sidebarMenu.findIndex((item) =>
    item.submenus?.some((subMenus) => activePath.startsWith(subMenus.link))
  );

  const [expandSubMenus, setExpandSubMenus] = useState(activeSubMenus);

  const handleToggle = (idx) => {
    setExpandSubMenus((prevExpanded) => (prevExpanded === idx ? null : idx));
  };

  const addClass =() =>{
    document.body.classList.toggle("open-sidebar")
  }

  return (
    <aside className="sidenav">
      <div className="sidebar-top">
        <div className="logo">
          <Link to="/" className="logo-lg"><img src={Logo} alt="" /></Link>
          <Link to="/" className="logo-sm"><img src={LogoSm} alt="" /></Link>
        </div>
        <div class="navmenu-sidbar">
          <div className="colpse-icon" onClick={addClass}>
            <span>
              <svg
                width="18"
                height="15"
                viewBox="0 0 18 15"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M5.75 14.3982L10.25 14.3982L5.25 7.39819L10.25 0.398193L5.75 0.398192L0.750001 7.39819L5.75 14.3982Z"
                  fill="white"
                />
                <path
                  d="M12.75 14.3982L17.25 14.3982L12.25 7.39819L17.25 0.398193L12.75 0.398193L7.75 7.39819L12.75 14.3982Z"
                  fill="white"
                />
              </svg>
            </span>
          </div>
        </div>
      </div>
      <div className="navbar-inner">
        <ul>
          {sidebarMenu.map((menus, idx) => (
            <li
              key={idx}
              className={`menu-item here  ${
                idx === expandSubMenus && menus.submenus ? "menu-accordion" : ""
              }`}
            >
              <Link
                onClick={() => handleToggle(idx)}
                to={!menus.submenus && menus.link}
                className={`menu-link
                ${expandSubMenus === idx ? "active" : ""}
                ${!menus.submenus && activePath === menus.link ? "active" : ""}
                
                `}
              >
                <span className="menu-icon">
                  {/* <i class={`${menus.icon}`} aria-hidden="true"></i> */}
                  {menus.icon}
                </span>
                <span className="menu-title">{menus.name}</span>
                {menus.submenus && <span className="menu-arrow"></span>}
              </Link>
              {menus.submenus && (
                <div
                  className={`menu-sub menu-sub-accordion menu-active-bg overflw-hdn ${
                    expandSubMenus === idx ? "max-h-400" : "max-h-0"
                  }`}
                >
                  {menus.submenus &&
                    menus.submenus.map((subMenus, subIdx) => (
                      <div key={subIdx} className={`menu-item`}>
                        <Link
                          className={`menu-link ${
                            activePath === subMenus.link ? "active" : ""
                          }`}
                          to={subMenus.link}
                        >
                          <span className="menu-bullet">
                            <span className="bullet bullet-dot"></span>
                          </span>
                          <span className="menu-title">{subMenus.name}</span>
                        </Link>
                      </div>
                    ))}
                </div>
              )}
            </li>
          ))}
        </ul>
      </div>
    </aside>
  );
};

export default SideBar;
